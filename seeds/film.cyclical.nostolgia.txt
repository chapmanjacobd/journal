The film is edited in such a way that there are two stories concurrently happening but it seems like one. The character that we've spent the most time with is actually disconnected from the historical battle that occured 20 years ago. 

(option: But what we've been seeing, him fighting alongside his father, is actually an older brother. Their similar facial disimilarity was not obvious until now.) 

Now that we've revealed this to the audience, the earlier defeat is not as tragic. His father, the king, was killed but the revenge battle is gearing up as the new prince's training and battle reinactment is now complete.
